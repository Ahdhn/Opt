**Development Journal** 
		Michael Mara


**2015/11/24 15:53**

After debugging improper warp reductions, I have a cost function for the non-block solver running, but producing results *very* different than the block solver. Time to debug! Tahnkfully I have the ability to turn individual terms off, which should help quite a bit.

**2015/11/24 13:53**

Went down a couple of dead ends while trying to get the non-block solver to work. Reverted some stuff and now going to try to change pieces at a time while checking each change to make sure the blocked solver doesn't change.

Made a small (2 frame) test case to run experiments on. First up is making sure the initial cost is repeatable:

Trial 1: 7955.705078
Trial 2: 7955.706543
Trial 3: 7955.706055

Seems fairly repeatable. What I don't understand is why the first frame always looks so much worse than the rest. (This is true for all of the optimizers and regardless of what the frames actually are (I tried swapping first and second frames to no perceivable difference))



**2015/11/23 17:12**

Gilbert is all set up to work on Opt! Beyond that, struggled through getting the CUDA non-patch solver to not crash, rewrote it to use warp reductions, found null pointers, etc. Now ready to start slotting in the SFS code.


**2015/11/23 15:48**

Stalled progress on non-blocked SFS, but had a very productive series of meetings with Matthias + Gilbert about fast solving strategies 
(specifically, the idea, proposed by Gilbert, that we should materialize the matrix coefficients at the start of each non-linear 
iteration and just apply the matrix repeatedly for PCG).

**2015/11/23 13:42**

Tested non-blocked versions of both terra and terra AD solver. Terra version seems same as blocked, AD version is definitely not correct, but seems to propagate NaNs less strongly than the non-blocked version. 

Fixing the AD version is still an open issue.

Added in the framework for a non-blocked CUDA solver by copying over files from PoissonImageEditing and adding plumbing code so that we can call it in place of the other solvers.
Currently tracking down an issue where there are illegal memory accesses, despite the fact I stripped out most of the code that should be doing anything. Solving this and then slowly implementing full functionality to
bring it on par with the blocked solver are my highest priorities.


**2015/11/20 16:42**

Brought all versions of ShapeFromShading online. Current status:

CUDA (block solver only): *Increases* cost
Terra: Seems to work fairly well
Terra AD: NaNs are propagating.

Things to do next: switch terra versions to non-blocked version. Write non-blocked CUDA version. Debug AD version.

**2015/11/20 15:27**

Added areWeBroken.sh, which is meant to be a one-button regression test. Right now, just compiles and runs the known-good samples.

Working towards getting Shape From Shading online, added new documentation to aid future versions of myself in that process.


<!-- Markdeep: --><style class="fallback">body{white-space:pre;font-family:monospace}</style><script src="markdeep.min.js"></script><script src="http://casual-effects.com/markdeep/latest/markdeep.min.js"></script>